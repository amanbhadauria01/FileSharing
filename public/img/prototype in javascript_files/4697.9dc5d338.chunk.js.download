(self.webpackChunklite=self.webpackChunklite||[]).push([[4697],{4697:(e,t,n)=>{"use strict";n.d(t,{Xw:()=>U,e0:()=>A,Rf:()=>B});var r=n(59713),o=n.n(r),l=n(28655),i=n.n(l),a=n(71439),c=n(67294),u=n(90194),s=n(41707),m=n(1072),d=n(42933),p=n(51512),f=n(534);function g(){var e=i()(["\n  fragment NewsletterV3AmpButton_newsletterV3 on NewsletterV3 {\n    id\n    collection {\n      ...collectionDefaultBackgroundTheme_collection\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var E=(0,a.Ps)(g(),f.Gi),w=function(e){var t=e.newsletterV3,n=e.buttonLayout,r=void 0===n?"MULTI-LINE":n,o=e.buttonSize,l=void 0===o?"LARGE":o,i=e.buttonStyle,a=void 0===i?"STRONG":i,g=e.redirectUrl;return c.createElement(s.Z,null,(function(e){return c.createElement(m.f,{theme:(0,f.jN)(null==t?void 0:t.collection,e)},c.createElement(p.cW,{source:{newsletterV3Id:t.id},extendSource:!0},c.createElement(d.x,{margin:"COMPACT"===r?"10px 20px 10px 0":"",xs:{margin:"10px 0 0 0"}},c.createElement(u.w,{buttonSize:l,buttonStyle:a,newsletterV3Id:null==t?void 0:t.id,onClick:function(){return null},showMailIcon:!1,buttonText:"Learn more",redirectUrl:g}))))}))},v=n(31429),x=n(55346),b=n(53976),h=n(76532),y=n(73891),V=n(82318),S=n(37278),T=n(98024),C=n(95760),_=n(6688),R=n(27108),L=n(14391),O=n(67297),N=n(80637),I=n(27952);function P(){var e=i()(["\n  fragment NewsletterV3Promo_publisher on Publisher {\n    __typename\n    ... on User {\n      id\n      username\n      name\n      viewerIsUser\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n    }\n    ... on Collection {\n      id\n      slug\n      domain\n      name\n      newsletterV3 {\n        id\n        ...NewsletterV3Promo_newsletterV3\n      }\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function k(){var e=i()(["\n  fragment NewsletterV3Promo_newsletterV3 on NewsletterV3 {\n    slug\n    name\n    description\n    ...NewsletterV3AmpButton_newsletterV3\n    ...NewsletterV3SubscribeButton_newsletterV3\n    ...NewsletterV3SubscribeByEmail_newsletterV3\n  }\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}var A=(0,a.Ps)(k(),E,v.B,x.Lh),B=(0,a.Ps)(P(),A),D=function(e){return o()({borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},N.sm(e),{padding:"24px 24px 28px 24px"})},M=function(e){var t=e.isAmp,n=e.viewer,r=e.newsletterV3,o=e.newsletterV3LandingUrl,l=e.useCustomDomainLOFlow;return t?r&&c.createElement(w,{newsletterV3:r,buttonLayout:"COMPACT",redirectUrl:o}):n||l?r&&c.createElement(v.x,{newsletterV3:r,buttonLayout:"COMPACT",helperTextColor:"DARKER",redirectUrl:l?o:void 0}):r&&c.createElement(x.QL,{newsletterV3:r})},U=function(e){var t,n,r,o,l,i=e.postId,a=e.publisher,u=c.useRef(null),s=(0,O.v9)((function(e){return e.config.authDomain})),m=(0,O.p9)((function(e){return e.config.isAmp})),f=(0,C.Av)(),g=(0,_.I)(),E=(0,h.H)().value,w=!!(0,b.V)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),v=null==(0,O.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(s)),x=!E&&v&&w,N=a.newsletterV3,P=null==N?void 0:N.type,k=a.username,A=void 0===k?"":k,B=(0,I.iBn)(null!==(t=null==N?void 0:N.slug)&&void 0!==t?t:"",s,P===L.Rr.NEWSLETTER_TYPE_COLLECTION?a:void 0,P===L.Rr.NEWSLETTER_TYPE_AUTHOR&&A?A:void 0),U="Collection"===a.__typename?a.id:void 0,j=(0,y.g)(U).viewerEdge;switch(P){case L.Rr.NEWSLETTER_TYPE_COLLECTION:n="Sign up for ".concat(null==N?void 0:N.name),r="0px",o="You're an editor of ".concat(null==N?void 0:N.name),l=null==j?void 0:j.isEditor;break;case L.Rr.NEWSLETTER_TYPE_AUTHOR:n="Get ".concat(a.name,"'s stories in your inbox"),r="6px",o="You cannot subscribe to yourself",l=a.viewerIsUser}var F=!1,$=function(){!F&&W()&&(f.event("newsletterV3.promoViewed",{newsletterV3Id:null==N?void 0:N.id,postId:i}),F=!0)},W=function(){var e;if(!u.current)return!1;var t=null===(e=u.current)||void 0===e?void 0:e.getBoundingClientRect(),n=t.top+t.height/2;return n>=0&&n<=window.innerHeight};return c.useEffect((function(){return $(),window&&R.V6.on("scroll",$),function(){R.V6.off("scroll",$)}}),[]),N&&c.createElement(p.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},c.createElement("div",{ref:u,className:g(D)},c.createElement(d.x,{paddingBottom:r},c.createElement(S.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},n)),P===L.Rr.NEWSLETTER_TYPE_COLLECTION&&c.createElement(c.Fragment,null,c.createElement(d.x,{paddingTop:"4px"},c.createElement(T.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(a.name))),c.createElement(d.x,{paddingTop:"8px",paddingBottom:"10px"},c.createElement(T.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==N?void 0:N.description," ",!m&&c.createElement(V.r,{inline:!0,linkStyle:"OBVIOUS",href:B},"Take a look.")))),l?c.createElement(d.x,{paddingTop:"10px"},c.createElement(T.F,{scale:"M",color:"DARKER"},o)):c.createElement(d.x,{display:"flex",flexWrap:"wrap"},c.createElement(M,{viewer:E,isAmp:m,useCustomDomainLOFlow:x,newsletterV3:N,newsletterV3LandingUrl:B}))))}},55346:(e,t,n)=>{"use strict";n.d(t,{QL:()=>U,Lh:()=>F});var r=n(28655),o=n.n(r),l=n(59713),i=n.n(l),a=n(63038),c=n.n(a),u=n(46829),s=n(71439),m=n(67294),d=n(90194),p=n(42933),f=n(55099),g=n(6688),E=n(99701),w={from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},v=function(e){return function(t){return{width:"20px",height:"20px",borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"".concat(t.baseColor.border.light," transparent ").concat(t.baseColor.border.light," ").concat(t.baseColor.border.light),animation:"".concat(e," 1s infinite linear;")}}},x=function(e){var t=e.buttonSize,n=void 0===t?"LARGE":t,r=e.buttonStyle,o=void 0===r?"STRONG":r,l=(0,g.I)(),i=function(){var e=(0,E.o)({keyframesName:w}).keyframesName;return m.createElement("div",{className:l(v(e))})},a=function(){return m.createElement(p.x,null,m.createElement(p.x,{display:"inline-block",float:"left",marginRight:"8px"},m.createElement(i,null)),m.createElement(p.x,{float:"left"},"Loading.."))};return m.createElement("div",{style:{cursor:"wait"}},m.createElement(f.z,{buttonStyle:o,onClick:function(){return null},size:n,width:"207px",disabled:!0},m.createElement(a,null)))},b=n(90738),h=n(14414),y=n(7785),V=n(7462),S=n(1072),T=n(82318),C=n(98024),_=n(51512),R=n(77180),L=n(37581),O=n(67297),N=n(49456),I=n(51299),P=n(27952),k=n(534);function A(){var e=o()(["\n  fragment NewsletterV3SubscribeByEmail_newsletterV3 on NewsletterV3 {\n    id\n    slug\n    collection {\n      ...collectionDefaultBackgroundTheme_collection\n      ...collectionUrl_collection\n    }\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function B(){var e=o()(["\n  mutation SendNewsletterSubscriptionAcctAuthEmail(\n    $newsletterV3Id: String!\n    $email: String!\n    $redirect: String\n    $captchaValue: String\n    $operation: String\n  ) {\n    sendNewsletterSubscriptionAcctAuthEmail(\n      newsletterV3Id: $newsletterV3Id\n      email: $email\n      redirect: $redirect\n      captchaValue: $captchaValue\n      operation: $operation\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return B=function(){return e},e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e){var t=e.centerContent,n=void 0!==t&&t,r=e.newsletterV3,o=(0,R.F)(),l=(0,_.pK)(),i=(0,_.hp)(),a=(0,O.v9)((function(e){return e.config.authDomain})),s=(0,O.v9)((function(e){return e.navigation.currentLocation})),f=(0,O.v9)((function(e){return e.config.productName})),g=m.useState(""),E=c()(g,2),w=E[0],v=E[1],A=m.useState(""),B=c()(A,2),D=B[0],U=B[1],F=m.useState(!1),$=c()(F,2),W=$[0],Y=$[1],z=m.useState(!1),G=c()(z,2),K=G[0],q=G[1],H=m.useState(!1),Q=c()(H,2),X=Q[0],Z=Q[1],J=m.useState(!1),ee=c()(J,2),te=ee[0],ne=ee[1],re=m.useState(""),oe=c()(re,2),le=oe[0],ie=oe[1],ae="register",ce=null==s.match("http[s]?://[^/]*".concat(a)),ue=r.collection,se=r.id,me=r.slug,de=(0,P.Zul)(se),pe=ue?(0,P.iBn)(me,a,ue):s;(0,u.useQuery)(y.qz,{fetchPolicy:"no-cache",skip:!de||ce,onCompleted:function(e){var t=e.accountToken;return t&&ie((0,h.hQ)(pe,l,i,de,t))}});var fe=function(e){v(e),Y(!0),setTimeout((function(){return Y(!1)}),V.zn),q(!1),Z(!1)},ge=function(){(0,N.J)(D)?(Z(!0),q(!0)):fe("Enter a valid email address.")},Ee=function(){fe("We couldn't process your request. Try again, or contact our support team.")},we=(0,u.useMutation)(j,{onCompleted:function(e){switch(e.sendNewsletterSubscriptionAcctAuthEmail.__typename){case"SusiMethod":U(D),ne(!0);break;case"BadRequest":fe("Enter a valid email address.");break;case"FailedChallenge":case"NotFound":default:Ee()}},onError:Ee}),ve=c()(we,1)[0],xe={newsletterV3Id:se,email:D,operation:ae,redirect:le},be=(0,I.U)();return m.createElement(S.f,{theme:(0,k.jN)(ue,o)},m.createElement(p.x,{alignItems:n?"center":"flex-start",display:"flex",flexDirection:"column",justifyContent:n?"center":"flex-start"},m.createElement(b.k,{callback:function(e){ve({variables:M({captchaValue:e},xe)})},shouldExecuteRecaptcha:K}),m.createElement(p.x,{display:te?"none":"inline"},m.createElement(p.x,{alignItems:"center",display:"flex",justifyContent:"space-between",sm:{alignItems:n?"center":"flex-start",flexDirection:"column",height:"130px",paddingTop:"16px"},height:"56px"},m.createElement(p.x,{marginTop:w&&"25px",sm:{marginTop:"0"}},m.createElement(V.II,{errorMessage:w,handleInputChange:function(e){U(e.target.value.trim())},handleSubmit:ge,input:D,inputType:V.n$.EMAIL,isAnimating:W,textAlign:"start",placeholder:"Your email",width:"".concat({xl:375,lg:375,md:325,sm:450,xs:200,"":200}[be],"px")})),m.createElement(p.x,{marginBottom:"auto",marginLeft:"15px",sm:{marginLeft:"0px",marginTop:"15px"}},X?m.createElement(x,{newsletterV3Id:se}):m.createElement(L.$,{eventData:{operation:ae}},m.createElement(d.w,{newsletterV3Id:se,onClick:ge})))),m.createElement(p.x,{paddingTop:w&&"20px",marginTop:"10px",sm:{marginTop:"0"}},m.createElement(C.F,{color:"DARKER",scale:"XS"},"By signing up, you will create a ",f," account if you don’t already have one. Review our"," ",m.createElement(T.r,{href:(0,P.wob)(),linkStyle:"OBVIOUS",inline:!0,target:"_blank"},"Privacy Policy")," ","for more information about our privacy practices."))),m.createElement(p.x,{display:te?"inline":"none",marginBottom:"15px",marginTop:"5px"},m.createElement(C.F,{color:"DARKER",scale:"M"},m.createElement("b",null,"Check your inbox"),m.createElement("br",null),f," sent you an email at ",D," to complete your subscription."))))},j=(0,s.Ps)(B()),F=(0,s.Ps)(A(),k.Gi,P.nfI)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/4697.9dc5d338.chunk.js.map