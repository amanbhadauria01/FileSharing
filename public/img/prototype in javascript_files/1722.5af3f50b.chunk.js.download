(self.webpackChunklite=self.webpackChunklite||[]).push([[1722],{43915:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=r.createElement("path",{d:"M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z",fillRule:"evenodd"});const i=function(e){return r.createElement("svg",o({width:25,height:25},e),l)}},55459:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=r.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const i=function(e){return r.createElement("svg",o({width:29,height:29},e),l)}},14345:(e,t,n)=>{"use strict";n.d(t,{A:()=>$,r:()=>X});var r=n(28655),o=n.n(r),l=n(71439),i=n(67294),a=n(67154),s=n.n(a),c=n(63038),u=n.n(c),d=n(12291),p=n(93653),f=n(35848),v=n(53962),m=n(62806),h=n(71245),E=n(965),b=n(78820),C=n(73232),y=n(53976),P=n(76532),w=n(1932),g=n(32262),S=n(57469),I=n(23824),T=n(29169),x=n(92528),k=n(80362),O=n(82318),R=n(66266),_=n(98024),V=n(6688),D=n(14391),j=n(65347),A=n(67297),M=n(93394),F=n(39171),L=n(51064),U=n(55573),B=n(27952);function K(){var e=o()(["\n  fragment TruncatedPostCardEditorWriterButton_post on Post {\n    id\n    collection {\n      id\n      name\n      slug # Needed for rejectPostFromPub (not currently exposed as a reusable fragment)\n    }\n    allowResponses\n    clapCount\n    visibility\n    mediumUrl\n    responseDistribution\n    ...useIsPinnedInContext_post\n    ...CopyFriendLinkMenuItem_post\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n"]);return K=function(){return e},e}var z=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},N=function(e){var t=e.post,n=e.publisherContext,r=e.isEditor,o=e.isWriter,l=e.creator,a=(0,V.I)(),c=(0,A.v9)((function(e){return e.config.authDomain})),K=t.id,N=t.collection,q=t.responseDistribution,Q=t.visibility,G=t.mediumUrl,H=t.allowResponses,W=(0,y.V)({name:"enable_updated_three_dot_menu",placeholder:!1}),Z=(0,P.H)().value,J=null==Z?void 0:Z.id,Y=null==l?void 0:l.id,$=(0,w.T)(K).viewerEdge,X=N||{id:"",name:""},ee=X.id,te=X.name,ne=(0,L.O)(!1),re=u()(ne,3),oe=re[0],le=re[1],ie=re[2],ae=(0,b.n_)(t,n),se=u()(ae,2),ce=se[0],ue=se[1],de=i.useState(""),pe=u()(de,2),fe=pe[0],ve=pe[1],me=i.useCallback((function(){ie(),ue().then((function(e){var t=e.errors;t&&t.length&&t[0].message?ve(t[0].message):window.location.reload()}))}),[ie,ue,ve]),he=(0,h.yb)(t),Ee=(0,L.O)(!1),be=u()(Ee,3),Ce=be[0],ye=be[1],Pe=be[2],we=i.useCallback((function(){he(N).then((function(){return window.location.reload()}))}),[ee,he]),ge=(0,p.j)(K),Se=u()(ge,1)[0],Ie=(0,L.O)(!1),Te=u()(Ie,3),xe=Te[0],ke=Te[1],Oe=Te[2],Re=i.useCallback((function(){Se().then((function(){return window.location.reload()}))}),[Se]),_e=q===D.Et.DISTRIBUTED,Ve=(0,L.O)(!1),De=u()(Ve,3),je=De[0],Ae=De[1],Me=De[2],Fe={buttonStyle:"ERROR",cancelText:"Cancel"},Le="truncatedPostCardEditorWriterMenu",Ue="Delete story".concat(_e?" and response":""),Be=_e?C.Q:"Are you sure you want to delete this story?",Ke="LOCKED"===Q,ze=!!W&&("User"===n&&o||"Collection"===n&&r),Ne=(0,d.I0)(),qe=i.useCallback((function(e){return Ne((0,j.at)(e))}),[Ne]),Qe=(0,A.b$)((function(e){return e.multiVote.clapsPerPost})),Ge=(0,U.l)(Qe,t,$),He=Ge.clapCount,We=Ge.viewerClapCount,Ze=(0,E.CP)();return i.createElement(i.Fragment,null,i.createElement(x.Q,s()({},Fe,{isVisible:Ce,onConfirm:we,hide:Pe,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",te,"?"),i.createElement(x.Q,s()({},Fe,{isVisible:xe,onConfirm:Re,hide:Oe,titleText:Ue,confirmText:"Delete",isDestructiveAction:!0}),Be),i.createElement(x.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:je,onConfirm:function(){var e=(0,B.d0A)(c,K);window.location.replace(e)},hide:Me,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},C.t),i.createElement(k.J,{ariaId:Le,hide:ie,isVisible:oe,popoverRenderFn:function(){return i.createElement(g.mX,null,i.createElement(g.Sl,null,_e?i.createElement(O.r,{linkStyle:"SUBTLE",onClick:(0,F.B)(ie,Ae)},"Edit story"):i.createElement(O.r,{linkStyle:"SUBTLE",href:(0,B.d0A)(c,K)},"Edit story")),(r||o&&"User"===n)&&i.createElement(g.Sl,null,i.createElement(O.r,{onClick:me},ce?"Unpin":"Pin"," story")),i.createElement(g.oK,null),i.createElement(g.Sl,null,i.createElement(O.r,{href:(0,B.KIb)(c,K)},"Story settings")),i.createElement(g.Sl,null,i.createElement(O.r,{href:(0,B.T0G)(c,K)},"Story stats")),W&&Ke&&G&&(null==$?void 0:$.shareKey)&&i.createElement(v.$,{post:t,shareKey:null==$?void 0:$.shareKey}),i.createElement(g.oK,null),ze?i.createElement(m.r,{hidePopover:ie,postId:t.id,allowResponses:H}):null,ee&&i.createElement(g.Sl,null,i.createElement(O.r,{onClick:ye},"Remove story from publication")),o&&i.createElement(g.Sl,null,i.createElement(O.r,{onClick:(0,F.B)(ie,ke)},"Delete story")),W&&r&&!o&&i.createElement(i.Fragment,null,i.createElement(g.oK,null),J&&He&&We&&We>0?i.createElement(g.Sl,null,i.createElement(O.r,{onClick:function(){return Ze(t,(null==Z?void 0:Z.id)||"",-We,$),qe({postId:t.id,clapCount:He-We,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void ie()}},"Undo applause for this post")):null,i.createElement(T.z,{targetUserId:Y,postId:t.id,hidePopover:ie,viewerId:J}),i.createElement(f.qT,{hidePopover:ie,creator:l}),i.createElement(S.F,{hidePopover:ie,creator:l,viewer:Z}),i.createElement(I.j,{hidePopover:ie,creator:l,viewer:Z})))}},i.createElement(O.r,{ariaControls:Le,ariaExpanded:oe?"true":"false",ariaLabel:"More options",onClick:le},i.createElement(M.Z,{className:a(z)}))),i.createElement(R.F,{isVisible:!!fe,hide:function(){return ve("")},duration:5e3},i.createElement(_.F,{scale:"M"},fe)))},q=(0,l.Ps)(K(),b.xt,v.g,E.JP),Q=n(36511);function G(){var e=o()(["\n  fragment TruncatedPostCardReaderButton_post on Post {\n    id\n    collection {\n      id\n    }\n    creator {\n      id\n    }\n    clapCount\n    ...ClapMutation_post\n  }\n  ","\n"]);return G=function(){return e},e}var H=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},W=function(e){var t=e.post,n=e.viewer,r=(0,V.I)(),o=t.creator,l=t.collection,a=null==o?void 0:o.id,s=null==l?void 0:l.id,c=(0,L.O)(!1),p=u()(c,3),v=p[0],m=p[1],h=p[2],b="truncatedPostCardReaderMenu",C=(0,Q.r)().viewerId,P=(0,w.T)(t.id).viewerEdge,x=(0,d.I0)(),R=i.useCallback((function(e){return x((0,j.at)(e))}),[x]),_=(0,A.b$)((function(e){return e.multiVote.clapsPerPost})),D=(0,U.l)(_,t,P),F=D.clapCount,B=D.viewerClapCount,K=(0,E.CP)(),z=(0,y.V)({name:"enable_updated_three_dot_menu",placeholder:!1});if(z){if(!a)return null}else if(!s||!a)return null;var N=z?C&&F&&B&&B>0:null;return i.createElement(k.J,{ariaId:b,hide:h,isVisible:v,popoverRenderFn:function(){return i.createElement(g.mX,null,!!N&&i.createElement(g.Sl,null,i.createElement(O.r,{onClick:function(){return K(t,(null==n?void 0:n.id)||"",-B,P),R({postId:t.id,clapCount:F-B,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void h()}},"Undo applause for this post")),i.createElement(T.z,{targetUserId:a,postId:t.id,hidePopover:h,viewerId:C}),i.createElement(f.qT,{hidePopover:h,creator:o}),i.createElement(S.F,{hidePopover:h,creator:o,viewer:n}),i.createElement(I.j,{hidePopover:h,creator:o,viewer:n}))}},i.createElement(O.r,{ariaControls:b,ariaExpanded:v?"true":"false",ariaLabel:"More options",onClick:m},i.createElement(M.Z,{className:r(H)})))},Z=(0,l.Ps)(G(),E.JP),J=n(73891);function Y(){var e=o()(["\n  fragment TruncatedPostCardOverflowButton_post on Post {\n    creator {\n      id\n    }\n    ...TruncatedPostCardEditorWriterButton_post\n    ...TruncatedPostCardReaderButton_post\n  }\n  ","\n  ","\n"]);return Y=function(){return e},e}var $=function(e){var t,n=e.post,r=e.publisherContext,o=(0,P.H)().value,l=(0,J.g)(null===(t=n.collection)||void 0===t?void 0:t.id).viewerEdge,a=!(null==l||!l.isEditor),s=n.creator,c=(null==o?void 0:o.id)===(null==s?void 0:s.id);return o?a||c?i.createElement(N,{post:n,isEditor:a,isWriter:c,publisherContext:r,creator:s}):i.createElement(W,{post:n,viewer:o}):null},X=(0,l.Ps)(Y(),q,Z)},40917:(e,t,n)=>{"use strict";n.d(t,{e:()=>u});var r=n(59713),o=n.n(r),l=n(4743),i=n(14391),a=n(43198);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t){var n,r=null!==(n=(0,l.LI)(e).titleIndex)&&void 0!==n?n:(0,a.s)(e,a.j);return e.map((function(e,n){return e.type===i.NJ.IMG?function(e,t){return t?c(c({},e),{},{href:t}):e}(e,t):n===r?function(e,t){var n;return t?c(c({},e),{},{markups:[{anchorType:i.yG.LINK,type:i.Jh.A,start:0,end:(null==e||null===(n=e.text)||void 0===n?void 0:n.length)||0,href:t,userId:null,linkMetadata:null}]}):e}(e,t):e}))}},30570:(e,t,n)=>{"use strict";n.d(t,{sK:()=>f,L0:()=>v,q9:()=>m});var r=n(28655),o=n.n(r),l=n(63038),i=n.n(l),a=n(71439),s=n(67294),c=n(74908),u=n(53976);function d(){var e=o()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p=s.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){}}),f=function(){return s.useContext(p)},v=function(e){var t=e.children,n=s.useState(null),r=i()(n,2),o=r[0],l=r[1],a=s.useState(!1),d=i()(a,2),f=d[0],v=d[1],m=s.useState(null),h=i()(m,2),E=h[0],b=h[1],C=(0,u.V)({name:"enable_inline_expansion",placeholder:null});return s.createElement(p.Provider,{value:{expandedPostId:o,setExpandedPostId:l,postInView:f,setPostInView:v,expandedPost:E,setExpandedPost:b}},s.createElement(c.k,{post:E,preload:!!C},t))},m=(0,a.Ps)(d())},33819:(e,t,n)=>{"use strict";n.d(t,{h:()=>h,K:()=>E});var r=n(28655),o=n.n(r),l=n(71439),i=n(67294),a=n(42933),s=n(33914),c=n(98024),u=n(95760),d=n(51512),p=n(6688),f=n(43915),v=n(55459);function m(){var e=o()(["\n  fragment ResponsesIconButton_post on Post {\n    allowResponses\n    postResponses {\n      count\n    }\n  }\n"]);return m=function(){return e},e}var h=function(e){var t=e.allowResponses,n=e.responsesCount,r=e.handleClick,o=e.postId,l=e.isLimitedState,m=e.iconStylesOverride,h=e.countStylesOverride,E=e.svgSize,b=void 0===E?"L":E,C=e.responsesCountColor,y=void 0===C?"LIGHTER":C,P=(0,p.I)(),w=(0,u.Av)(),g=(0,d.pK)();if(!t)return null;var S=function(e){return{fill:e.baseColor.fill.light,opacity:l?.4:1,cursor:l?"not-allowed":"pointer",":hover":{fill:l?void 0:e.baseColor.fill.lighter}}},I={opacity:l?.4:1},T="S"===b?i.createElement(f.Z,{"aria-label":"responses",className:P([S,m])}):i.createElement(v.Z,{"aria-label":"responses",className:P([S,m])}),x=i.createElement("button",{onClick:l?void 0:function(e){r(e),w.event("responses.viewAllClicked",{postId:o,source:g})},className:P({cursor:"pointer",border:0,padding:0})},i.createElement(a.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(a.x,{display:"flex",alignItems:"center"},T,!!n&&i.createElement(c.F,{tag:"p",scale:"M",color:y},i.createElement("div",{className:P([h,I])},n))))),k=i.createElement(s._,{tooltipText:"This feature is temporarily disabled.",targetDistance:15},x);return i.createElement(i.Fragment,null,l?k:x)},E=(0,l.Ps)(m())},45893:(e,t,n)=>{"use strict";var r;n.d(t,{Fz:()=>r,yo:()=>o,ZR:()=>l}),function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(r||(r={}));var o=3,l="414px"},74908:(e,t,n)=>{"use strict";n.d(t,{k:()=>C});var r=n(319),o=n.n(r),l=n(63038),i=n.n(l),a=n(38125),s=n.n(a),c=n(67294),u=n(86156),d=n(45893),p=n(68356),f=n.n(p),v=n(19725),m=f()({loader:function(){return Promise.all([n.e(8342),n.e(4586),n.e(9046),n.e(8698),n.e(9590),n.e(5706),n.e(7417)]).then(n.bind(n,25706))},modules:["src/components/responses/sidebar/threaded/ThreadedResponsesSidebar"],webpack:function(){return[25706]},loading:function(){return null},render:(0,v.n)("ThreadedResponsesSidebar")}),h=n(77180),E=n(27108),b=n(8403),C=function(e){var t=e.children,n=e.post,r=e.preload,l=void 0===r||r,a=c.useState(!1),p=i()(a,2),f=p[0],v=p[1],C=(0,h.F)(),y=!!(0,b.Wd)("responsesOpen"),P=c.useState(!1),w=i()(P,2),g=w[0],S=w[1],I=c.useRef(!0),T=c.useState(void 0),x=i()(T,2),k=x[0],O=x[1],R=c.useRef(0),_=c.useState(!1),V=i()(_,2),D=V[0],j=V[1],A=c.useState([]),M=i()(A,2),F=M[0],L=M[1],U=function(){L(s()(F))},B=c.useCallback((function(){return S(!0)}),[S]),K=c.useCallback((function(){S(!1),L([]),I.current=!0}),[S,L,I]);c.useEffect((function(){j(!0),S(y)}),[y]);var z=function(){window.innerWidth<C.breakpoints.md&&v(!0)};return c.useEffect((function(){return z(),E.V6.on("resize",z),function(){return E.V6.off("resize",z)}}),[]),c.useEffect((function(){var e,t,n=null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.documentElement;return f&&null!=n&&n.style&&(g?(n.style.top="-".concat(R.current,"px"),R.current=n.scrollTop,n.style.overflow="hidden",n.style.position="fixed"):(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=R.current)),function(){f&&null!=n&&n.style&&(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=R.current)}}),[g]),c.useEffect((function(){l&&m.preload()}),[l]),c.createElement(u.f.Provider,{value:{addContinueThisThreadSidebar:function(e){I.current=!1,L([].concat(o()(F),[e]))},openSidebarToRespondToHighlight:function(e){O(e),S(!0)},openSidebar:B,closeSidebar:K}},!!n&&D&&c.createElement(m,{isResponsesSidebarVisible:g&&0===F.length,parentPost:n,inResponseToQuote:k,setInResponseToQuote:O,showPreviousSidebar:U,cleanupSidebar:K,initialSidebarRender:I.current}),!!n&&D&&F.map((function(e,t,r){var o,l=(o=t,(d.yo-1)*(o+1));return c.createElement(m,{key:n.id,isResponsesSidebarVisible:g&&t===r.length-1,parentPost:n,inResponseToQuote:k,setInResponseToQuote:O,continueThisThreadPost:e,continueThisThreadPostDepth:l,showPreviousSidebar:U,cleanupSidebar:K,initialSidebarRender:I.current})})),t)}},66210:(e,t,n)=>{"use strict";n.d(t,{V:()=>v,k:()=>m});var r=n(28655),o=n.n(r),l=n(23493),i=n.n(l),a=n(71439),s=n(67294),c=n(95760),u=n(51512),d=n(27108),p=n(21146);function f(){var e=o()(["\n  fragment PostScrollTracker_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n  }\n"]);return f=function(){return e},e}function v(e,t,n,r){var o=(0,c.Av)(),l=(0,u.Qi)(),a=Date.now(),f=null,v=s.useCallback(i()((function(){if(e.current){var r=(0,p.L6)(e.current);if((0,p.pn)(r)){var i=Date.now(),s=(0,p.tM)(r),c=(0,p.UO)(),u=(0,p.t_)(),d=Math.round(s.top),v=Math.round(s.top+s.height),m=c.top,h=c.top+u.height,E=c.height;o.event("post.streamScrolled",{postIds:[t.id],collectionIds:[t.collection?t.collection.id:""],sequenceIds:[t.sequence?t.sequence.sequenceId:""],sources:n?["post_page"]:[l],tops:[d],bottoms:[v],areFullPosts:[!0],loggedAt:i,timeDiff:null!==f?Math.round(i-f):0,scrollTop:m,scrollBottom:h,scrollableHeight:E,viewStartedAt:a}),f=i}}}),1e3),[t,n]);s.useEffect((function(){v();var e=null!=r&&r.current?(0,d.jC)(null==r?void 0:r.current):d.V6;return e.on("scroll_end",v),function(){e.off("scroll_end",v)}}),[v])}var m=(0,a.Ps)(f())},32261:(e,t,n)=>{"use strict";n.d(t,{O1:()=>l}),n(59713);var r=n(67294),o=r.createContext(null),l=function(e){var t=e.event,n=e.children;return r.createElement(o.Provider,{value:{event:t}},n)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1722.5af3f50b.chunk.js.map