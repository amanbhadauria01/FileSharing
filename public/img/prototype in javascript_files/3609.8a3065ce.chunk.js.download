(self.webpackChunklite=self.webpackChunklite||[]).push([[3609],{71254:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var a=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var r=a.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z",fillRule:"evenodd"});const o=function(e){return a.createElement("svg",i({width:25,height:25,viewBox:"0 0 25 25"},e),r)}},6106:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var a=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}var r=a.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13c.2.18.52.17.71-.03a.5.5 0 0 0 .12-.29H19V6z"});const o=function(e){return a.createElement("svg",i({width:25,height:25,viewBox:"0 0 25 25"},e),r)}},13609:(e,n,t)=>{"use strict";t.d(n,{aR:()=>ce,Gm:()=>se,_C:()=>ge});var a=t(28655),i=t.n(a),r=t(67154),o=t.n(r),l=t(63038),d=t.n(l),c=t(71439),s=t(67294),g=t(59713),u=t.n(g),f=t(319),p=t.n(f),m=t(46829),v=t(16084),h=t(77154),E=t(67900),C=t(50223),b=t(42933),w=t(82318),I=t(80908),P=t(98024),y=t(6688),O=t(85277),T=t(73976);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _={maxHeight:"250px",overflowY:"auto",maxWidth:"400px"};function j(e){var n,t,a,i=e.isVisible,r=e.hide,o=e.target,l=e.kind,d=e.switchModal,c=e.viewer,g=(0,y.I)(),u=(0,v.dw)({limit:v.e7,isPaginated:!0}),f=(0,O.w)(),k=(0,m.useQuery)(v.Dk,{variables:u}),j=k.data,A=k.error,V=k.loading,S=k.fetchMore;s.useEffect((function(){A&&f({message:"",toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[A]);var B,L=null==j?void 0:j.catalogsByUser.catalogs;return L&&"Catalog"===(null==j||null===(n=j.readingList)||void 0===n?void 0:n.__typename)&&(L=[j.readingList].concat(p()(L))),null!=j&&null!==(t=j.catalogsByUser)&&void 0!==t&&null!==(a=t.paging)&&void 0!==a&&a.nextPageCursor&&(B=function(){return S({variables:x(x({},u),{},{pagingOptions:x(x({},u.pagingOptions),{},{cursor:{id:j.catalogsByUser.paging.nextPageCursor.id}})})})}),s.createElement(C.v,{isVisible:i,hide:r,confirmText:"Done",isDestructiveAction:!1,onConfirm:r},s.createElement(b.x,{height:"400px"},s.createElement(b.x,{paddingBottom:"24px"},s.createElement(I.Dx,{scale:"L"},"Save to")),s.createElement(b.x,{textAlign:"left",width:"400px",sm:{width:"100%"}},s.createElement(w.r,{onClick:d},s.createElement(P.F,{scale:"L",color:"ACCENT"},"Create new list")),s.createElement(b.x,{padding:"16px 0"},s.createElement(h.E,null))),L&&s.createElement(E.P,{fetchMore:B},s.createElement("div",{className:g(_)},s.createElement(T.n,{viewer:c,target:o,kind:l,isLoading:V,catalogs:L,queryVariablesOptions:{limit:v.e7,isPaginated:!0}})))))}function A(e){var n,t=e.target,a=e.kind,i=e.showAddToModal,r=e.showCreateModal,o=e.hidePanel,l=e.viewer,d=(0,v.dw)({limit:v.W}),c=(0,O.w)(),g=(0,m.useQuery)(v.Dk,{variables:d}),u=g.data,f=g.error,h=g.loading;s.useEffect((function(){f&&c({message:"",toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[f]);var E=s.useCallback((function(){i(),o()}),[i,o]),C=s.useCallback((function(){r(),o()}),[r,o]),I=null==u?void 0:u.catalogsByUser.catalogs.slice(0,v.W-1);return I&&"Catalog"===(null==u||null===(n=u.readingList)||void 0===n?void 0:n.__typename)&&(I=[u.readingList].concat(p()(I))),s.createElement(b.x,{padding:"20px 20px 16px 24px",width:"300px",sm:{width:"327px"}},s.createElement(T.n,{target:t,kind:a,viewer:l,catalogs:I,isLoading:h,queryVariablesOptions:{limit:v.W}}),!h&&s.createElement(s.Fragment,null,s.createElement(b.x,{paddingBottom:"16px"},s.createElement(w.r,{onClick:E},s.createElement(P.F,{color:"ACCENT",scale:"L"},"See all"))),s.createElement(P.F,{color:"ACCENT",scale:"L"},s.createElement(w.r,{onClick:C},"Create new list"))))}var V=t(24821),S=t(80122),B=t(50361),L=t.n(B),D=t(46282),R=t(57768),M=t(14391),N=t(6304),F=t(94945);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function U(){var e=i()(["\n  fragment useAddItemToPredefinedCatalog_postViewerEdge on PostViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return U=function(){return e},e}function G(){var e=i()(["\n  fragment useAddItemToPredefinedCatalog_bookEditionViewerEdge on BookEditionViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return G=function(){return e},e}function Z(){var e=i()(["\n  mutation AddToPredefinedCatalog(\n    $type: PredefinedCatalogType!\n    $operation: PredefinedCatalogAddOperationInput!\n  ) {\n    addToPredefinedCatalog(type: $type, operation: $operation) {\n      __typename\n      ... on AddToPredefinedCatalogSucces {\n        version\n        insertedItem {\n          __typename\n          catalogItemId\n          catalogId\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var $="temp-catalog-id",z=(0,c.Ps)(Z()),Q=(0,c.Ps)(G()),Y=(0,c.Ps)(U()),q=t(80362),J=t(19464),K=t(51064),X=t(71254),ee=t(6106),ne=function(e){return{color:e.baseColor.border.dark,fill:e.baseColor.fill.lighter,"&:hover":{color:e.baseColor.border.darker,fill:e.baseColor.fill.normal}}},te=function(e){return{color:e.baseColor.border.darker,fill:e.baseColor.fill.normal}},ae=function(){var e=(0,y.I)();return s.createElement(X.Z,{className:e(ne)})},ie=function(){var e=(0,y.I)();return s.createElement(ee.Z,{className:e(te)})};function re(e){var n=e.insideACatalog,t=e.insideAPredefined;return n||t?s.createElement(ie,null):s.createElement(ae,null)}function oe(){var e=i()(["\n  fragment AddToCatalogBase_post on Post {\n    id\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n          catalogItemIds\n        }\n        predefinedContainingThis {\n          catalogId\n          predefined\n          catalogItemIds\n        }\n      }\n      ...editCatalogItemsMutation_postViewerEdge\n      ...useAddItemToPredefinedCatalog_postViewerEdge\n    }\n    ...WithToggleInsideCatalog_post\n  }\n  ","\n  ","\n  ","\n"]);return oe=function(){return e},e}function le(){var e=i()(["\n  fragment AddToCatalogBase_bookEdition on BookEdition {\n    id\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n        }\n        predefinedContainingThis {\n          predefined\n        }\n      }\n      ...editCatalogItemsMutation_bookEditionViewerEdge\n      ...useAddItemToPredefinedCatalog_bookEditionViewerEdge\n    }\n    ...WithToggleInsideCatalog_bookEdition\n  }\n  ","\n  ","\n  ","\n"]);return le=function(){return e},e}function de(e){var n=e.children,t=e.isPanelVisible,a=e.hidePanel,i=e.togglePanel,r=e.target,o=e.kind,l=e.viewer,c=(0,K.O)(!1),g=d()(c,4),u=g[0],f=g[1],p=g[2],v=g[3],h=(0,K.O)(!1),E=d()(h,4),C=E[0],b=E[1],w=E[2],I=E[3],P=s.useState(!1),y=d()(P,2),O=y[0],T=y[1],k=function(e,n,t,a){var i=(0,m.useMutation)(z,{variables:{type:n,operation:{preprend:{type:a,id:t}}},optimisticResponse:{addToPredefinedCatalog:{__typename:"AddToPredefinedCatalogSucces",version:R.xt,insertedItem:{__typename:"CatalogItemV2",catalogId:$,catalogItemId:R.PH}}},update:function(i,r){var o,l=null===(o=r.data)||void 0===o?void 0:o.addToPredefinedCatalog;if("AddToPredefinedCatalogSucces"===(null==l?void 0:l.__typename)){var d,c,s=l.insertedItem,g=l.version;if(s.catalogId!==$&&(0,D.UV)(i,s.catalogId,g),a===M.ej.BOOK_EDITION)d="BookEditionViewerEdge:".concat((0,N.j)(t,e)),c=Q;else{if(a!==M.ej.POST)return;d="PostViewerEdge:".concat((0,F.Q)(t,e)),c=Y}var u=i.readFragment({id:d,fragment:c});if(null!=u&&u.catalogsConnection){var f=L()(u.catalogsConnection.predefinedContainingThis),p=f.findIndex((function(e){return e.predefined===n}));if(-1!==p)f[p].catalogItemIds.push(s.catalogItemId);else{var m={catalogId:s.catalogId,predefined:n,version:g,catalogItemIds:[s.catalogItemId]};f.push(m)}i.writeFragment({id:d,fragment:c,data:W(W({},u),{},{catalogsConnection:W(W({},u.catalogsConnection),{},{predefinedContainingThis:f})})})}}}});return d()(i,1)[0]}(l.id,M.l8.READING_LIST,r.id,o),x=r.viewerEdge.catalogsConnection,_=(null==x?void 0:x.predefinedContainingThis)&&x.predefinedContainingThis.length>0,V=(null==x?void 0:x.catalogsContainingThis)&&x.catalogsContainingThis.length>0,B=s.useMemo((function(){var e;return!!(null==x||null===(e=x.predefinedContainingThis)||void 0===e?void 0:e.find((function(e){return e.predefined===M.l8.READING_LIST})))}),[x]),H=s.useCallback((function(){T(!O),v(),I()}),[v,I,O]),U=s.useCallback((function(){i(),B||V||k()}),[i,V,B,k]),G=s.createElement(re,{insideACatalog:!!V,insideAPredefined:!!_});return s.createElement(q.J,{isVisible:t,popoverRenderFn:function(){return s.createElement(A,{showAddToModal:f,showCreateModal:b,hidePanel:a,target:r,kind:o,viewer:l})},hide:a,targetDistance:15,referenceWidth:"100%"},u?s.createElement(j,{isVisible:u,hide:p,switchModal:H,target:r,kind:o,viewer:l}):s.createElement(S.a,{isVisible:C,hide:w,switchToAddToModal:H,isSwitchingModal:O,target:r,kind:o,viewer:l}),n({onClick:U,bookmarkIcon:G,isCataloged:!!V||!!_}))}function ce(e){return s.createElement(J.B,null,(function(n){var t=n.isVisible,a=n.toggle,i=n.hide;return s.createElement(de,o()({},e,{isPanelVisible:t,togglePanel:a,hidePanel:i}))}))}var se=(0,c.Ps)(le(),Q,R.T_,V.tA),ge=(0,c.Ps)(oe(),Y,R.ST,V.m7)},77154:(e,n,t)=>{"use strict";t.d(n,{E:()=>r});var a=t(67294),i=t(42933),r=function(){return a.createElement(i.x,{height:"0px",width:"100%",borderBottom:"BASE_LIGHTER"})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3609.8a3065ce.chunk.js.map