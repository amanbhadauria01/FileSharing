(self.webpackChunklite=self.webpackChunklite||[]).push([[1264],{87508:(e,t,n)=>{"use strict";n.d(t,{cu:()=>ve,Y6:()=>fe,rU:()=>ge});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(42933),s=n(67122),c=function(e){var t=e.children;return a.createElement(a.Fragment,null,a.createElement(l.x,{marginTop:"-240px",background:"linear-gradient(".concat((0,s.l9)(0),",\n        ").concat((0,s.l9)(.5),",\n        ").concat((0,s.l9)(1),")"),height:"250px",position:"relative",width:"100%"}),a.createElement(l.x,{backgroundColor:"BACKGROUND"},a.createElement(l.x,{margin:"auto",maxWidth:"760px",sm:{margin:"0 24px 0"}},t)))},u=n(51562),d=n(32149),m=n(71542),p=n(76532),g=n(32589),f=n(324),v=n(62181),h=n(11852),x=n(30027),y=n(55099),E=n(17614),b=n(98024),w=n(95760),S=n(51512),P=n(2874),I=n(85277),O=n(67297),_=n(6522),A=n(96879),k=n(27952);function R(){var e=o()(["\n  fragment MemberOnlyWall_post on Post {\n    id\n    creator {\n      id\n      name\n      username\n      ...useShouldShowEntityDrivenSubscription_creator\n      ...EntityDrivenSubscriptionLandingPageScreen_writer\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}var C="entity-driven-sub-member-only-wall",M=function(e){return(0,p.H)().value?null:a.createElement(l.x,{display:"flex",justifyContent:"center"},a.createElement(b.F,{scale:"L"},a.createElement(l.x,{display:"flex",flexDirection:"row",xs:{paddingBottom:"20px"},sm:{paddingBottom:"20px"},md:{paddingBottom:"40px"},lg:{paddingBottom:"40px"},xl:{paddingBottom:"40px"}},a.createElement(l.x,{paddingRight:"4px"},"Already a member?"),a.createElement(v.R9,{operation:"login",linkStyle:"OBVIOUS",susiEntry:"entity_driven_subscription_member_only_wall",post:e},"Sign in"))))},T=function(e){var t,n,r,o,i,s=e.post,d=(0,I.w)(),v=(0,w.Av)(),P=(0,O.v9)((function(e){return e.config.authDomain})),R=(0,O.v9)((function(e){return e.config.productName})),T=(0,p.H)().value,B=(0,g.P)(null==s||null===(t=s.creator)||void 0===t?void 0:t.id).viewerEdge,D=null==s?void 0:s.creator,L=null!==(n=null==B?void 0:B.isAllowEdsEnabled)&&void 0!==n&&n,U=null!==(r=null==T?void 0:T.mediumMemberAt)&&void 0!==r&&r,j=null!==(o=null==B?void 0:B.isUser)&&void 0!==o&&o,N=(null==D?void 0:D.id)||"",W=null==D?void 0:D.name,F=(0,k.o2w)(P,null==s?void 0:s.id),z=null!==(i=null==D?void 0:D.imageId)&&void 0!==i?i:_.gG,H=j&&L&&U,V=a.useCallback((function(){v.event("entityDrivenSubCallToAction.clicked",{userId:null==T?void 0:T.id,entityId:N}),H&&d({message:"You're already a ".concat(R," member."),toastStyle:"MESSAGE"})}),[D,T,P]),G=(0,A.Rk)((0,k.c5p)(P),{subscribeToUserId:N}),$=null!=T&&T.mediumMemberAt?F:G,q=T?"li-".concat(C):"lo-".concat(C);return a.createElement(f.N8,null,a.createElement(c,null,a.createElement(S.cW,{source:{name:"entity_driven_subscription_member_only_wall",postId:s.id,susiEntry:"entity_driven_subscription_member_only_wall"}},a.createElement(l.x,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(l.x,{display:"flex",flexDirection:"column",padding:"20px 0",sm:{paddingTop:"28px",paddingBottom:"32px",textAlign:"center"},maxWidth:"680px"},a.createElement(x.P,{size:"full"},a.createElement(l.x,{display:"flex",paddingBottom:"32px",justifyContent:"center"},a.createElement(m.s,null,a.createElement(h.z,{miroId:z,alt:W||"",diameter:80,freezeGifs:!1})),a.createElement(m.e,null,a.createElement(h.z,{miroId:z,alt:W||"",diameter:80,freezeGifs:!1}))),a.createElement(l.x,{paddingBottom:"20px"},a.createElement(E.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},a.createElement(u.W,{featureString:q,target:"title-copy"},T?"".concat(T.name,", read more from ").concat(W," — and everything else on Medium."):"Read more from ".concat(W," — and everything else on Medium.")))),a.createElement(l.x,{paddingBottom:"20px"},a.createElement(b.F,{scale:"L",color:"DARKER"},a.createElement(u.W,{featureString:q,target:"description-copy"},W," has made this story exclusive to members. Upgrade to keep reading."))),a.createElement(l.x,{paddingBottom:"20px"},a.createElement(y.z,{size:"LARGE",onClick:V,buttonStyle:"STRONG",href:$},"Upgrade")),a.createElement(M,{post:s})))))))},B=(0,i.Ps)(R(),d.G,P._k),D=n(12291),L=n(53976),U=n(36511),j=n(37258),N=n(19608),W=n(27168),F=n(48881),z=n(62876),H=n(96907),V=n(33572);function G(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n    creator {\n      name\n    }\n  }\n"]);return G=function(){return e},e}var $=function(e){var t=e.optimizelyFeatureString,n=e.post,r=e.showTrialPaywall,o=e.authDomain,i=(0,p.H)().value;return a.createElement(S.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n.id}},a.createElement(H.M,null,a.createElement(l.x,{display:"inline-block",textAlign:"center"},a.createElement(u.W,{featureString:t,target:r?"trial-upsell-button":"upsell-button-".concat(i&&i.hasPastMemberships?"resume-membership":"upgrade")},a.createElement(z.a,{isButton:!0,buttonStyle:r?"BRAND":"STRONG",width:r||i&&i.hasPastMemberships?"182px":"104px",redirectUrl:(0,k.c5p)(o)},r?"Start your free trial":i&&i.hasPastMemberships?"Resume membership":"Upgrade")))))},q=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=(0,D.I0)();return a.createElement(S.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},a.createElement(l.x,{display:"flex",sm:{flexDirection:"column"}},a.createElement(l.x,{display:"flex",flexDirection:"row",justifyContent:"center"},n.facebook||n.google||n.twitter?a.createElement(N.r,{userSocialLogins:n}):a.createElement(j.o,{onSuccess:function(){return r((0,I.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:n.userId},(function(e){var t=e.handleSubmit;return a.createElement(y.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")})))),t&&a.createElement(l.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},a.createElement(b.F,{scale:"M"},a.createElement(W.G,{declineSuggestedAccount:t,isSocial:!!n&&!!(n.facebook||n.google||n.twitter)}))))},K=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=e.suggestedAccountEventData,o=e.showSuggestedAccount,i=e.postId;return a.createElement(S.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:i}},a.createElement(H.M,{eventData:r},a.createElement(l.x,{display:"inline-block",textAlign:"center"},a.createElement(q,{declineSuggestedAccount:t,showSuggestedAccount:o,userSocialLogins:n}),a.createElement(l.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},a.createElement(b.F,{scale:"L"},a.createElement(z.a,{eventData:r,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},Y=function(e){var t=e.post,n=e.excludePadding,r=void 0!==n&&n,o=(0,O.v9)((function(e){return e.config.authDomain})),i=(0,O.v9)((function(e){return e.config.productName})),s=(0,p.H)().value,d=(0,U.r)().viewerId,m=(0,w.Av)(),g=null==s?void 0:s.isMembershipTrialEligible,v=!(!(0,L.V)({name:"enable_trial_upsell",placeholder:!1})||!g),h=!!(0,L.V)({name:"optimizely_holdback",placeholder:!1});a.useEffect((function(){g&&m.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[g]);var x="paywall";return a.createElement(f.N8,null,a.createElement(c,null,a.createElement(F.o,{postRenderCallback:function(){}},(function(e){var n,c=e.loading,m=e.showSuggestedAccount,p=e.declineSuggestedAccount,g=e.userSocialLogins;return c?a.createElement(a.Fragment,null):(m&&(x="suggested-account-paywall"),m&&(n={alternateUserSuggestionShown:m,alternateUserSuggestionAccountType:(0,V.S)(g),alternateUserSuggestionTargetUserId:!!g&&g.userId,alternateUserSuggestionSourceUserId:d}),a.createElement(a.Fragment,null,a.createElement(u.W,{featureString:x,target:v?"trial-background-color":"background-color"},a.createElement(l.x,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(l.x,{display:"flex",flexDirection:"column",padding:r?"48px 0 0":"48px 50px",sm:{padding:"28px 16px 32px",textAlign:"center"}},a.createElement(u.W,{featureString:x,target:v?"webCCTrialHeading":"fewerClicksHeading"},a.createElement(E.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,t,n,r){var o=r.showSuggestedAccount,i=r.showTrialPaywall,s=r.inHoldback,c=t?(0,V.J)(t):null;return c=c&&c.length<=13?c:null,o?"Switch to your member account for unlimited reading.":i?a.createElement(l.x,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},c?"".concat(c,", keep reading."):"Keep reading."):a.createElement(l.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},s?"How to read this story — and everything else on ".concat(e,"."):c?n?"".concat(c,", read more from ").concat(n," — and everyone else on ").concat(e,"."):"".concat(c,", here's how to read this story — and everything else on ").concat(e,"."):n?"How to read this story from ".concat(n," — and everything else on ").concat(e,"."):"How to read this story — and everything else on ".concat(e,"."))}(i,s&&s.name,t.creator&&t.creator.name,{showSuggestedAccount:m,showTrialPaywall:v,inHoldback:h}))),a.createElement(b.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!m&&!v&&a.createElement(a.Fragment,null,a.createElement(u.W,{featureString:x,target:"second-header-fewer-clicks"},a.createElement(l.x,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},"You’ve read all your free member-only stories. Become a member to get unlimited access and support the voices you want to hear more from.")),a.createElement(l.x,{display:"flex",justifyContent:"flex-start",sm:{justifyContent:"center"}},a.createElement($,{optimizelyFeatureString:x,post:t,showTrialPaywall:v,authDomain:o}))),a.createElement(u.W,{featureString:x,target:v?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},a.createElement(l.x,{marginTop:m?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,t,n,r){var o=n.showTrialPaywall;if(n.showSuggestedAccount&&t){var i=t.isMember,s=t.redactedEmailAddress;return a.createElement(a.Fragment,null,"Looks like you're coming from the ",i&&"member ","account"," ",a.createElement("b",null,s)," but you’re signed in as ",a.createElement("b",null,null==r?void 0:r.email),". Switch to your",i?" member account for unlimited access":" account",".")}return a.createElement(l.x,{marginTop:"28px",marginBottom:"28px",textAlign:o?"center":"left"},o?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):a.createElement(a.Fragment,null,a.createElement("b",null,"Read any story. "),"Access everything on ",e," across all your devices with no limits or ads.",a.createElement("br",null),a.createElement("br",null),a.createElement("b",null,"Reward great writing. "),"A portion of your membership fee will go toward the writers you read most."))}(i,g,{showSuggestedAccount:m,showTrialPaywall:v},s)))),!!m&&g&&a.createElement(K,{declineSuggestedAccount:p,userSocialLogins:g,suggestedAccountEventData:n,showSuggestedAccount:m,postId:t.id}),v&&!m&&a.createElement($,{optimizelyFeatureString:x,post:t,showTrialPaywall:v,authDomain:o}))))))}))))},Q=(0,i.Ps)(G()),J=n(6401),Z=n(66893),X=n(5731),ee=n(59317),te=n(81405),ne=n(90174),re=n(4134),oe=n(37581);function ie(){var e=o()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return ie=function(){return e},e}function ae(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return ae=function(){return e},e}var le="post_regwall",se=function(e){var t=e.enablePasswords,n=e.meterCount,r=e.optimizelyFeatureString,o=e.postId,i={operation:"register"},s=(0,ee.j)().openModal,c=function(e){var n=e.children;return t?a.createElement(u.W,{featureString:r,target:"google-button"},n):n};return a.createElement(l.x,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},a.createElement(u.W,{featureString:r,target:"google-button"},a.createElement(l.x,{margin:"".concat(t?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},a.createElement(oe.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},a.createElement(re.x,i)))),a.createElement(c,null,a.createElement(l.x,{marginBottom:t?"32px":"52px",sm:{marginBottom:"40px"}},a.createElement(oe.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},t?a.createElement(te.R,{goToEmailAuthStep:function(){s({step:"ENTER_EMAIL",susiEntry:le,operation:"register"})},operation:"register"}):a.createElement(ne.q,i)))))},ce=function(e){var t=e.meteringInfo,n=e.post,r=(0,w.Av)(),o=!!(0,Z.P5)("enable_passwords"),i="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,s="".concat(i?"syndicated-":"","regwall");return a.useEffect((function(){r.event("meter.viewed",{meterCount:null==t?void 0:t.postIds.length,postId:n.id,uiType:i?X.j.SyndicatedRegwall:X.j.RegWall})}),[]),a.createElement(f.N8,null,a.createElement(S.cW,{source:{postId:n.id,susiEntry:le}},a.createElement(c,null,a.createElement(u.W,{featureString:s,target:"background-color"},a.createElement(l.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},a.createElement(l.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},a.createElement(u.W,{featureString:s,target:"heading"},a.createElement(E.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},a.createElement(l.x,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),a.createElement(l.x,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),a.createElement(b.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},a.createElement(l.x,{display:"none",margin:"auto",paddingTop:"10px",width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),a.createElement(l.x,{display:"none",sm:{display:"block"}},a.createElement(l.x,{margin:"".concat(o?"40px":"42px"," 0")},a.createElement(J.a,{isButton:!0,postId:n.id,appEntry:"regwall"})),a.createElement(u.W,{featureString:s,target:"skip-app-copy"},a.createElement(l.x,{marginBottom:"-20px"},"Or, continue in mobile web"))),a.createElement(se,{meterCount:null==t?void 0:t.postIds.length,optimizelyFeatureString:s,postId:n.id,enablePasswords:o}),a.createElement(u.W,{featureString:s,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),a.createElement(u.W,{featureString:s,target:"sign-in-link",tag:"span"},a.createElement(v.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:le},"Sign in")))))))))},ue=(0,i.Ps)(ae(),v.qU),de=(0,i.Ps)(ie());function me(){var e=o()(["\n  fragment Wall_meteringInfo on MeteringInfo {\n    ...RegWall_meteringInfo\n  }\n  ","\n"]);return me=function(){return e},e}function pe(){var e=o()(["\n  fragment Wall_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    isLocked\n    isMarkedPaywallOnly\n    ...MemberOnlyWall_post\n    ...PayWall_post\n    ...RegWall_post\n  }\n  ","\n  ","\n  ","\n"]);return pe=function(){return e},e}var ge=(0,i.Ps)(pe(),B,Q,ue),fe=(0,i.Ps)(me(),de),ve=function(e){var t=e.post,n=e.meteringInfo,r=e.excludePadding,o=(0,w.Av)(),i=(0,p.H)().value,l=!!i,s=t.isLocked,c=t.isMarkedPaywallOnly,u=t.content.isLockedPreviewOnly,m=(0,L.V)({name:"enable_member_only_paywall",placeholder:!1}),g=(0,d.$)("entity_driven_subscription_milestone_2",null==t?void 0:t.creator);return a.useEffect((function(){!g||null!=i&&i.mediumMemberAt||o.event("experiment.eligible",{experimentId:"302c03fdc015"})}),[g,i]),u?(c||s)&&g&&m?a.createElement(T,{post:t}):l?a.createElement(Y,{post:t,excludePadding:r}):a.createElement(ce,{post:t,meteringInfo:n}):null}},15789:(e,t,n)=>{"use strict";n.d(t,{bl:()=>D,Uw:()=>T,mW:()=>M});var r=n(67154),o=n.n(r),i=n(63038),a=n.n(i),l=n(28655),s=n.n(l),c=n(46829),u=n(71439),d=n(67294),m=n(25415),p=n(40820),g=n(69677),f=n(72846),v=n(91442),h=n(59713),x=n.n(h),y=n(11642);function E(){var e=s()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return E=function(){return e},e}function b(){var e=s()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return b=function(){return e},e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}var I=(0,u.Ps)(b()),O=(0,u.Ps)(E()),_=n(76532),A=n(44059);function k(){var e=s()(["\n  query InteractivePostBodyQuery($postId: ID!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}function R(){var e=s()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that postMeteringOptions is defined in PostHandler, which uses InteractivePostBody\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return R=function(){return e},e}function C(){var e=s()(["\n  fragment InteractivePostBody_postPreview on Post {\n    extendedPreviewContent(\n      truncationConfig: {\n        previewParagraphsWordCountThreshold: 100\n        minimumWordLengthForTruncation: 150\n        truncateAtEndOfSentence: true\n        showFullImageCaptions: true\n        shortformPreviewParagraphsWordCountThreshold: 30\n        shortformMinimumWordLengthForTruncation: 30\n      }\n    ) {\n      bodyModel {\n        ...PostBody_bodyModel\n      }\n      isFullContent\n    }\n  }\n"]);return C=function(){return e},e}var M=(0,u.Ps)(C()),T=(0,u.Ps)(R(),p.iF,v.iB,O,f.Pk,f.v),B=(0,u.Ps)(k(),p.UW,v.g8,f.XV,f.w6,I),D=d.forwardRef((function(e,t){var n,r,i,l=e.activeGrafId,s=e.activeNoteId,u=e.isAuroraPostPageEnabled,h=e.post,x=e.inlinePost,E=e.postBodyInserts,b=e.richTextStyle,w=e.markedUpBodyModel,I=(0,_.H)().value,O=x&&!h?w||(null==x||null===(n=x.extendedPreviewContent)||void 0===n?void 0:n.bodyModel):null==h||null===(r=h.content)||void 0===r?void 0:r.bodyModel,k={creator:null==h?void 0:h.creator,isAuroraPostPageEnabled:u,postBodyInserts:E,ref:t,richTextStyle:b||"FULL_PAGE"},R=h&&h.creator&&h.creator.allowNotes||!1,C=(0,c.useLazyQuery)(B,{ssr:!1,variables:{postId:(null==h?void 0:h.id)||"",showNotes:R},notifyOnNetworkStatusChange:!0}),M=a()(C,2),T=M[0],D=M[1],L=D.called,U=D.data,j=null==U?void 0:U.post;if(d.useEffect((function(){h&&!L&&T()}),[h]),!O)return A.t.log("Expected post to have content or preview content."),null;var N=(null==h||null===(i=h.content)||void 0===i?void 0:i.bodyModel)&&(null==h?void 0:h.content.bodyModel.paragraphs)||[],W=function(e,t){return e&&t?e.map((function(e){var n=e.endOffset,r=e.startOffset,o=e.paragraphs&&e.paragraphs[0],i=function(e,t){return e?t.find((function(t){var n=t.name;return e===n})):null}(o.name,t);if(!o||!i)return null;var a=P(o.text,r,n),l=P(i.text,r,n);if(!a||!l)return null;if(a===l)return e;var s=i.text?i.text.indexOf(a):null;if("number"!=typeof s||s<0)return null;var c=s+a.length;return S(S({},e),{},{endOffset:c,startOffset:s})})).filter(y.b):e}(j&&j.highlights||[],N),F=j&&j.privateNotes||null;return d.createElement(g.yb,null,d.createElement(m.KN,{initialActivePrivateNoteId:s,initialActiveGrafName:l},d.createElement(p.Ms,{interactivePost:h,highlights:W,disableSelection:!h},d.createElement(v.U7,{highlights:W,paragraphs:N,viewer:I},d.createElement(f.yO,o()({},k,{bodyModel:O,highlights:W,privateNotes:F}))))))}))},50188:(e,t,n)=>{"use strict";n.d(t,{kD:()=>f,T8:()=>v,Qw:()=>h});var r,o,i=n(59713),a=n.n(i),l=n(57953),s="post-view",c="post-read",u="topic-view",d="medium-search",m="external-search",p=(r={},a()(r,s,200),a()(r,c,200),a()(r,u,200),a()(r,d,200),a()(r,m,200),r),g=(o={},a()(o,s,new l.Z("pv")),a()(o,c,new l.Z("pr")),a()(o,u,new l.Z("tv")),a()(o,d,new l.Z("ms")),a()(o,m,new l.Z("es")),o),f=function(e){x(s,e,Date.now())},v=function(e){x(c,e,Date.now())},h=function(e){x(u,e,Date.now())},x=function(e,t,n){var r=g[e];r.getCount()===p[e]&&r.clean();try{r.set(t,n)}catch(e){r.clean()}}},61264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ExpandablePost:()=>Oe,ExpandablePost_meteringInfo:()=>Se,ExpandablePost_post:()=>Pe});var r=n(67154),o=n.n(r),i=n(59713),a=n.n(i),l=n(63038),s=n.n(l),c=n(28655),u=n.n(c),d=n(82492),m=n.n(d),p=n(46829),g=n(71439),f=n(67294),v=n(75341),h=n(67432),x=n(61250),y=n(2500);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=n(14345),S=n(40917),P=n(87508),I=n(42963),O=n(78415),_=n(30570),A=n(4743),k=n(86156),R=n(15789),C=n(72846),M=n(86753),T=n(11146),B=n(82318),D=n(42933),L=n(98024),U=n(96879),j=n(27390);function N(){var e=u()(["\n  fragment ReadMore_post on Post {\n    mediumUrl\n    readingTime\n  }\n"]);return N=function(){return e},e}var W=(0,g.Ps)(N()),F=function(e){var t=e.isShortformMeteredWithMedia,n=e.onReadMore,r=e.showReadMore,o=e.post;if(!r)return null;var i=o.mediumUrl,a=o.readingTime;if(!i)return null;var l="".concat((0,j.Vd)(a||0)," min read"),s=(0,U.Rk)(i,{readmore:"1"});return f.createElement(B.r,{href:s,onClick:n,display:"block"},f.createElement(D.x,{paddingTop:t?"24px":"34px"},f.createElement(L.F,{color:"ACCENT",scale:"M"},"Read more"," ",l?" · ".concat(l):"")))},z=n(6688),H=function(e){var t=e.href,n=e.onReadMore,r=(0,z.I)();return f.createElement(B.r,{href:t,onClick:n},f.createElement("div",{className:r((function(e){return{position:"absolute",top:0,backgroundColor:e.backgroundColor,height:"100%",width:"100%",opacity:"80%",zIndex:"1"}}))}))},V=n(99046),G=n(93912),$=n(50077),q=n(33819),K=n(76532),Y=n(30027),Q=n(57693),J=n(95760),Z=n(51512),X=n(15699),ee=n(66210),te=n(58491),ne=n(36891),re=n(14391),oe=n(8403),ie=n(67297),ae=n(32261),le=n(64227),se=n(19732),ce=n(10963),ue=["100%","95%","93%","98%","98%"],de=function(){return f.createElement(D.x,{width:"100%"},ue.map((function(e,t){return f.createElement(D.x,{key:"placeholder-".concat(t),width:e,height:"16px",marginBottom:"18px",backgroundColor:"BASE_NORMAL"})})))},me=function(){var e=(0,z.I)(),t=(0,ce.P)();return f.createElement("div",{className:e((function(){return t}))},f.createElement(de,null))};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(){var e=u()(["\n  query ExpandablePostExpandedQuery($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    postResult(id: $postId) {\n      __typename\n      ... on Post {\n        id\n        collection {\n          id\n          slug\n        }\n        content(postMeteringOptions: $postMeteringOptions) {\n          bodyModel {\n            paragraphs {\n              name\n              text\n            }\n          }\n        }\n        ...InteractivePostBody_post\n        ...Wall_post\n        ...ExpandablePost_post\n        ...InlineExpansionContext_post\n        ...PostReadTracker_post\n      }\n    }\n    meterPost(postId: $postId, postMeteringOptions: $postMeteringOptions) {\n      __typename\n      ... on MeteringInfo {\n        ...Wall_meteringInfo\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return fe=function(){return e},e}function ve(){var e=u()(["\n  fragment ExpandablePost_post on Post {\n    id\n    creator {\n      ...CardByline_user\n    }\n    collection {\n      ...CardByline_collection\n    }\n    ...InteractivePostBody_postPreview\n    firstPublishedAt\n    isLocked\n    isSeries\n    isShortform\n    latestPublishedAt\n    mediumUrl\n    postResponses {\n      count\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n    }\n    readingTime\n    sequence {\n      slug\n    }\n    title\n    uniqueSlug\n    visibility\n    inResponseToPostResult {\n      ...InResponseToPostPreview_postResult\n    }\n    ...CardByline_post\n    ...TruncatedPostCardOverflowButton_post\n    ...MultiVote_post\n    ...ResponsesIconButton_post\n    ...PostFooterSocialPopover_post\n    ...BookmarkButton_post\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...InResponseToPostPreview_mediaResource\n    ...ReadMore_post\n  }\n  ","\n#   ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return ve=function(){return e},e}function he(){var e=u()(["\n  fragment ExpandablePost_meteringInfo on MeteringInfo {\n    ...Wall_meteringInfo\n  }\n  ","\n"]);return he=function(){return e},e}var xe=function(e){return{border:0,height:"1px",backgroundColor:e.baseColor.border.lighter,margin:0}},ye={xs:{marginTop:"32px",marginBottom:"30px"},sm:{marginTop:"32px",marginBottom:"30px"},md:{marginTop:"40px",marginBottom:"50px"},lg:{marginTop:"40px",marginBottom:"50px"},xl:{marginTop:"40px",marginBottom:"50px"}},Ee={xs:{marginTop:"30px",marginBottom:"30px"},sm:{marginTop:"30px",marginBottom:"30px"},md:{marginTop:"50px",marginBottom:"50px"},lg:{marginTop:"50px",marginBottom:"50px"},xl:{marginTop:"50px",marginBottom:"50px"}},be=[re.NJ.H3,re.NJ.H4],we=[re.NJ.IMG,re.NJ.IFRAME],Se=(0,g.Ps)(he(),P.Y6),Pe=(0,g.Ps)(ve(),$.yu,C.Pk,R.mW,$.br,w.r,V.x,q.K,T.u,M.z,X.h,ee.k,$.We,O.zJ,O.KI,W),Ie=(0,g.Ps)(fe(),R.Uw,P.rU,Pe,_.q9,te.W,P.Y6),Oe=function(e){var t,n,r,i,l,c=e.post,u=e.excludeMargin,d=void 0!==u&&u,g=e.includeTopDivider,E=void 0===g||g,C=e.includeBottomDivider,L=void 0!==C&&C,j=e.isFirst,N=void 0!==j&&j,W=e.publisher,re=e.hideAuthor,ce=void 0!==re&&re,ue=e.index,de=e.maxWidthSize,pe=void 0===de?"inset":de,fe=e.showInResponseToPostPreview,ve=void 0!==fe&&fe,he=e.mayShowPinned,Se=void 0!==he&&he,Pe=!!(0,K.H)().value,Oe=f.useRef(null),_e=f.useRef(null),Ae=f.useState(!1),ke=s()(Ae,2),Re=ke[0],Ce=ke[1],Me=f.useState(!1),Te=s()(Me,2),Be=Te[0],De=Te[1],Le=(0,_.sK)(),Ue=Le.expandedPostId,je=Le.setExpandedPostId,Ne=Le.expandedPost,We=Le.setExpandedPost,Fe=Le.setPostInView,ze=Le.postInView,He=(null==Ne?void 0:Ne.id)===c.id,Ve=(0,z.I)(),Ge=(0,J.Av)(),$e=(0,ie.v9)((function(e){return e.navigation.referrer})),qe=(0,oe.G1)(),Ke=ge(ge({},(0,Z.Lk)()),{},{index:ue});(0,te.t)(Pe,Oe,Ne,He);var Ye=f.useRef(null);(0,ee.V)(Ye,c,He);var Qe=f.useContext(k.f).openSidebar,Je=(null==c||null===(t=c.postResponses)||void 0===t?void 0:t.count)||0,Ze=c.id,Xe=c.clapCount,et=c.collection,tt=c.extendedPreviewContent,nt=c.isLocked,rt=c.firstPublishedAt,ot=c.latestPublishedAt,it=c.mediumUrl,at=c.pinnedAt,lt=c.pinnedByCreatorAt,st=c.visibility,ct=c.inResponseToPostResult,ut=c.inResponseToMediaResource,dt=(0,oe.PM)(),mt={referrer:$e,sk:qe,source:dt},pt=(0,p.useLazyQuery)(Ie,{variables:{postId:c.id,postMeteringOptions:mt}}),gt=s()(pt,2),ft=gt[0],vt=gt[1],ht=vt.called,xt=vt.data,yt=vt.loading,Et=vt.error,bt=null==xt?void 0:xt.meterPost;f.useEffect((function(){if(!yt&&Ue===c.id)if(Et&&Ce(!0),ht){var e=null==xt?void 0:xt.postResult;if((0,se.f)(e)){try{var t=function(e){var t,n,r,o,i,a,l,s;if(null==e||null===(t=e.extendedPreviewContent)||void 0===t||null===(n=t.bodyModel)||void 0===n||null===(r=n.paragraphs)||void 0===r||!r.length)throw new Error("Expected post to have preview content.");var c=new Map;null!=e&&null!==(o=e.extendedPreviewContent)&&void 0!==o&&null!==(i=o.bodyModel)&&void 0!==i&&null!==(a=i.paragraphs)&&void 0!==a&&a.length&&e.extendedPreviewContent.bodyModel.paragraphs.forEach((function(e){c.set(e.name,e)}));var u=[],d=[];return null!=e&&null!==(l=e.content)&&void 0!==l&&null!==(s=l.bodyModel)&&void 0!==s&&s.paragraphs&&e.content.bodyModel.paragraphs.forEach((function(e){var t,n=c.get(e.name);n&&n.text.length===(null===(t=e.text)||void 0===t?void 0:t.length)?u.push(n):d.push(e)})),m()({},e,{content:ge(ge(ge({},e.extendedPreviewContent),e.content),{},{isFullContent:!0,bodyModel:ge(ge(ge({},e.extendedPreviewContent.bodyModel),e.content.bodyModel),{},{paragraphs:[].concat(u,d)})})})}(e);je(t.id),We(t)}catch(e){Ce(!0)}De(!1)}else Ce(!0)}else ft()}),[Ue,ht,yt,xt,Et]),f.useEffect((function(){var e,t;He&&Ge.event("post.clientViewed",{postId:c.id,collectionId:null===(e=c.collection)||void 0===e?void 0:e.id,collectionSlug:null===(t=c.collection)||void 0===t?void 0:t.slug,context:2,referrer:$e,source:"post_page"})}),[He]);var wt=f.useCallback((function(e){var t;e.preventDefault(),De(!0);var n=null===(t=Oe.current)||void 0===t?void 0:t.getBoundingClientRect();null!=n&&n.top&&(_e.current=n.top),je(c.id)}),[]),St=f.useCallback((function(){ht||ft()}),[ht]);(0,le.L)((function(){var e,t=null===(e=Oe.current)||void 0===e?void 0:e.getBoundingClientRect();if(null!=Ne&&Ne.id&&He&&t){var n=t.top-(_e.current||0);Boolean(n)&&window.scrollBy(0,n)}}),[null==Ne?void 0:Ne.id,He]);var Pt=f.useCallback((function(e){if(Ne&&e)if(e.intersectionRatio){Fe(!0);var t=new URL(window.location.href);t.searchParams.set("p",Ne.id),window.history.pushState({},"",t.toString())}else{var n=new URL(window.location.href),r=n.searchParams.get("p");r&&r===Ne.id&&(Fe(!1),n.searchParams.delete("p"),window.history.pushState({},"",n.toString()))}}),[Ne]),It=f.useCallback((function(){return!He}),[He]);(0,ne.S)({onIntersect:Pt,target:Oe,disconnect:It},[Ne,He]);var Ot,_t,At,kt,Rt=(Ot=(0,v.g$)(),_t=(0,x.uk)(),At=(0,y.B)(),kt=(0,h.I)(),(0,f.useCallback)((function(e){var t;if(!Ot&&e.mediumUrl)return e.mediumUrl;var n=e.uniqueSlug||e.id;if(e.isSeries)return _t("ShowSeries",{postId:n});if(null!==(t=e.sequence)&&void 0!==t&&t.slug)return _t("ShowSequencePost",{sequenceSlug:e.sequence.slug,postId:n});if(e.collection){var r=At({id:e.collection.id,domain:e.collection.domain,slug:e.collection.slug});return"".concat(r,"/").concat(n)}if(e.creator){var o,i,a,l="customDomainState"in e.creator&&null!==(o=null===(i=e.creator.customDomainState)||void 0===i||null===(a=i.live)||void 0===a?void 0:a.domain)&&void 0!==o?o:null,s=kt(b(b({},e.creator),{},{domain:l}));return"".concat(s,"/").concat(n)}return _t("ShowPost",{postId:n})}),[Ot,_t,At,kt]));if(Re&&c.mediumUrl)return f.createElement(I.l,{to:c.mediumUrl});if(null==c||null===(n=c.extendedPreviewContent)||void 0===n||!n.bodyModel)return null;var Ct=(0,Z.f0)(Ke),Mt=(0,U.Rk)(Rt(c),{source:Ct}),Tt=null==c||null===(r=c.extendedPreviewContent)||void 0===r?void 0:r.bodyModel;if(!Tt)return null;var Bt=ge(ge({},Tt),{},{paragraphs:(0,S.e)(Tt.paragraphs,Mt)}),Dt=!!at&&!!ot,Lt=Dt?ot:rt,Ut=Dt?"Updated ":"",jt=!(null==c||null===(i=c.extendedPreviewContent)||void 0===i||!i.isFullContent),Nt=E&&!N&&f.createElement("hr",{className:Ve(xe)}),Wt=L&&f.createElement("hr",{className:Ve(xe)}),Ft=N?ye:Ee,zt={postId:Ze,collectionId:null==et?void 0:et.id,isFullPost:null==tt?void 0:tt.isFullContent,postVisibility:(0,G.z)(st),context:2,pinned:Boolean(at)},Ht="User"===(null==W?void 0:W.__typename)&&c.collection?c.collection:c.creator,Vt="User"===(null==W?void 0:W.__typename)?lt:at,Gt="number"==typeof(0,A.LI)(Bt.paragraphs).titleIndex?void 0:40,$t=f.createElement(f.Fragment,{key:"card-byline-and-mixtape"},Ht&&f.createElement($.u_,{publisher:Ht,hideAuthor:ce,href:it||void 0,isOneLine:!0,datePrefix:Ut,publishedAt:Lt,showStar:!!nt,showPinned:Se&&!!Vt,post:c}),ve&&f.createElement(O.CV,{inResponseToPostResult:ct,inResponseToMediaResource:ut,padding:"24px 0 0",postPreviewMarginBottom:Gt})),qt=Bt.paragraphs[0]&&we.includes(Bt.paragraphs[0].type)&&Bt.paragraphs[0].name,Kt=Bt.paragraphs[1]&&be.includes(Bt.paragraphs[1].type)&&Bt.paragraphs[1].name,Yt=W||c.creator,Qt=!(jt||He||Be||!it||!Yt),Jt=nt&&(2===Bt.paragraphs.length||3===Bt.paragraphs.length)&&1===Tt.sections.length&&Kt&&qt,Zt=Bt.paragraphs[0],Xt=Bt.paragraphs[1],en={insertType:"BYLINE",order:"before",component:$t},tn={insertType:"MEDIA_OVERLAY",order:"after",component:f.createElement(H,{key:"shortform-media-overlay-insert",href:Mt,onReadMore:wt})},nn=null!=Xt&&Xt.name&&null!=Zt&&Zt.name?(l={},a()(l,Xt.name,[en]),a()(l,Zt.name,[tn]),l):{},rn=Jt&&!He;return f.createElement(Z.cW,{source:Ke},f.createElement(D.x,o()({boxSizing:"content-box",marginLeft:"auto",marginRight:"auto"},d?{}:Ft),f.createElement(Y.P,{size:pe},Nt,f.createElement(X.o,{post:c,presentationContext:"POST_PREVIEW",isDisplayingFullPost:jt||He,suppressedEvents:jt?"VIEWED":void 0,shouldReportClientViewed:He,reportClientViewedOnFullPost:!0,postClientViewedContext:2,pinned:!!at},f.createElement(D.x,{sm:{marginTop:Nt?Jt?"48px":"24px":void 0},marginTop:Nt?Jt?"72px":"24px":void 0},Ht&&!Jt&&$t,f.createElement(D.x,{marginTop:Jt?"":"12px",ref:Ye},f.createElement(ae.O1,{event:{eventName:"post.permalinkClicked",data:ge(ge({},zt),{},{interfaceElement:"title"})}},f.createElement(R.bl,{isAuroraPostPageEnabled:!0,post:He?Ne:null,inlinePost:c,ref:Oe,richTextStyle:rn?"SHORTFORM_CARD":"INLINE",postBodyInserts:rn?nn:null,markedUpBodyModel:Bt})))),Qt&&f.createElement(Q.D,{onMouseEnter:St,onMouseLeave:function(){}},f.createElement(F,{isShortformMeteredWithMedia:!!Jt,onReadMore:wt,post:c,showReadMore:Qt})),Be&&f.createElement(D.x,{paddingTop:"24px"},f.createElement(me,null)),Ne&&bt&&f.createElement(P.cu,{post:Ne,meteringInfo:bt,excludePadding:!0}),c&&f.createElement(D.x,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:Jt?"32px":"36px"},f.createElement(D.x,{display:"flex",alignItems:"center"},f.createElement(V.S,{post:c,buttonStyle:"SUBTLE",susiEntry:"clap_preview",hasDialog:!0,shouldHideClapsText:!0}),f.createElement(D.x,{display:"flex",alignItems:"center",xl:{marginLeft:Xe?"24px":"12px"},lg:{marginLeft:Xe?"24px":"12px"},md:{marginLeft:Xe?"16px":"8px"},sm:{marginLeft:Xe?"16px":"8px"},xs:{marginLeft:Xe?"16px":"8px"},paddingTop:"3px"},f.createElement(B.r,{href:it+"?responsesOpen=true"},f.createElement(D.x,{marginTop:"5px"},f.createElement(q.h,{postId:c.id,responsesCount:Je,handleClick:Qe&&ze&&Ue===c.id?function(e){e.preventDefault(),Qe()}:function(){},allowResponses:c.allowResponses,isLimitedState:c.isLimitedState,responsesCountColor:"DARKER",countStylesOverride:{marginLeft:"4px"}}))))),f.createElement(D.x,{display:"flex",alignItems:"center",justifyContent:"flex-end"},f.createElement(D.x,{marginRight:"8px"},f.createElement(T.$,{post:c})),f.createElement(D.x,{marginRight:"8px"},f.createElement(M.e,{post:c,susiEntry:"bookmark_preview"})),(null==W?void 0:W.__typename)&&f.createElement(D.x,{marginRight:"-4px"},f.createElement(w.A,{post:c,publisherContext:W.__typename}))))))),L&&f.createElement(Y.P,{size:pe},Wt))}},32149:(e,t,n)=>{"use strict";n.d(t,{$:()=>u,G:()=>d});var r=n(28655),o=n.n(r),i=n(71439),a=n(53976),l=n(76532),s=n(32589);function c(){var e=o()(["\n  fragment useShouldShowEntityDrivenSubscription_creator on User {\n    id\n  }\n"]);return c=function(){return e},e}var u=function(e,t){var n,r,o=(0,l.H)().value,i=(0,s.P)(null==t?void 0:t.id).viewerEdge,c=(0,a.V)({name:e,placeholder:!1}),u=null!==(n=null==o?void 0:o.mediumMemberAt)&&void 0!==n&&n,d=null==i?void 0:i.isAllowEdsEnabled,m=null!==(r=null==i?void 0:i.isUser)&&void 0!==r&&r;return!!t&&(d&&!(null!=o&&o.id)||d&&m||!!c&&d&&!u)},d=(0,i.Ps)(c())},37258:(e,t,n)=>{"use strict";n.d(t,{o:()=>E});var r=n(63038),o=n.n(r),i=n(28655),a=n.n(i),l=n(71439),s=n(80439),c=n(67294),u=n(66893),d=n(36511),m=n(90738),p=n(14414),g=n(95760),f=n(51512),v=n(11348),h=n(67297);function x(){var e=a()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return x=function(){return e},e}var y=(0,l.Ps)(x()),E=function(e){var t=e.actionUrl,n=e.children,r=e.onSuccess,i=e.token,a=e.userId,l=(0,g.Av)(),x=!!(0,u.P5)("skip_sign_in_recaptcha"),E=c.useState(!1),b=o()(E,2),w=b[0],S=b[1],P=(0,h.v9)((function(e){return e.navigation.currentLocation})),I=function(){S(!1)},O=(0,f.pK)(),_=(0,f.hp)(),A=t&&i?(0,p.hQ)(P,O,_,t,i):(0,p.hQ)(P,O,_),k=(0,d.r)(),R=k.loading,C=k.error,M=k.viewerId;return R||C?null:c.createElement(s.mm,{mutation:y,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),r&&r();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),S(!1);break;case"BadRequest":case"NotFound":default:I()}},onError:I},(function(e){var t=function(t){(0,v.Zs)(!0,M,a,"Email",!1);var n="medium";l.event("susi.methodClicked",{entryPoint:_,operation:"login",susiMethod:n.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:n.toLowerCase(),alternateUserSuggestionTargetUserId:a,alternateUserSuggestionSourceUserId:M}),e({variables:{userId:a,redirect:A,captchaValue:t}})};return c.createElement(c.Fragment,null,!x&&c.createElement(m.k,{callback:t,shouldExecuteRecaptcha:w}),n({handleSubmit:function(){return x?t(null):S(!0)}}))}))}},19608:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(67294),o=n(90174),i=n(4134),a=n(70146),l=n(37581),s=function(e){var t=e.actionUrl,n=e.token,s=e.userSocialLogins,c={actionUrl:t||"",operation:"login",token:n||"",targetUserId:s.userId,alternateUserSuggestion:!0};return r.createElement(l.$,{eventData:{operation:c.operation}},s.google?r.createElement(i.x,c):s.facebook?r.createElement(o.q,c):s.twitter?r.createElement(a.G,c):r.createElement(r.Fragment,null))}},27168:(e,t,n)=>{"use strict";n.d(t,{G:()=>p});var r=n(59713),o=n.n(r),i=n(67294),a=n(12291),l=n(76532),s=n(82318),c=n(51512),u=n(85277),d=n(67297);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){var t=e.declineSuggestedAccount,n=e.isSocial,r=(0,d.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),p=(0,c.hp)(),g=(0,a.I0)(),f=(0,l.H)(),v=f.loading,h=f.error,x=f.value;if(v||h)return i.createElement(i.Fragment,null);var y=function(e){return e?i.createElement(s.r,{onClick:function(){return E("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):i.createElement(i.Fragment,null,"Not you?"," ",i.createElement(s.r,{onClick:function(){return E("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",i.createElement(s.r,{onClick:function(){return E("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},E=function(e){var n="SIGNIN_OPTIONS"===e?"login":"register";t(),g((0,u.Pc)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:n,step:e},!!p&&{susiEntry:p})))};return r?y(x):x?i.createElement(s.r,{onClick:function(){return t()}},"Not me"):y(n)}},48881:(e,t,n)=>{"use strict";n.d(t,{o:()=>b});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),l=n(63038),s=n.n(l),c=n(71439),u=n(80439),d=n(67294),m=n(76532),p=n(36511),g=n(95760),f=n(51512),v=n(33572),h=n(8403);function x(){var e=o()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return x=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=e.postRenderCallback,r=(0,g.Av)(),o=(0,f.hp)(),i=(0,h.PM)(),a=(0,f.P7)(i||""),l=a.userId,c=a.name,x=d.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),y=s()(x,2),b=y[0],S=y[1];d.useEffect((function(){var e=b.shouldRun,t=b.showSuggestedAccount,r=b.userSocialLogins;e&&n(P,t,r)}),[b.shouldRun]);var P=(0,m.H)().value,I=(0,p.r)(),O=I.loading,_=I.error,A=I.viewerId;if(O||_)return null;var k=!("email"!==c||P&&P.mediumMemberAt||!l);return k&&l?d.createElement(u.AE,{query:w,variables:{userId:l}},(function(e){var i=e.loading,a=e.error,l=e.data,s=(l=void 0===l?{}:l).userSocialLogins,c=!(i||a||!s||P&&!s.isMember||!s.facebook&&!s.google&&!s.twitter&&!s.redactedEmailAddress),u=E({loading:i,showSuggestedAccount:c},c&&{userSocialLogins:s,declineSuggestedAccount:function(){var e=(0,v.S)(s);r.event("susi.suggestNotYou",{entryPoint:o,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==s?void 0:s.userId,alternateUserSuggestionSourceUserId:A})}});return!n||i||b.shouldRun||S({shouldRun:!0,showSuggestedAccount:c,userSocialLogins:s}),t(u)})):(n&&!b.shouldRun&&S(E(E({},b),{},{shouldRun:!0})),t({showSuggestedAccount:k,loading:!1}))},w=(0,c.Ps)(x())},5731:(e,t,n)=>{"use strict";var r;n.d(t,{j:()=>r}),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(r||(r={}))},58491:(e,t,n)=>{"use strict";n.d(t,{t:()=>h,W:()=>x});var r=n(28655),o=n.n(r),i=n(63038),a=n.n(i),l=n(71439),s=n(67294),c=n(12291),u=n(50188),d=n(95760),m=n(51512),p=n(27108),g=n(85277),f=n(21146);function v(){var e=o()(["\n  fragment PostReadTracker_post on Post {\n    id\n    collection {\n      slug\n    }\n    sequence {\n      sequenceId\n    }\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n  }\n"]);return v=function(){return e},e}function h(e,t,n,r){var o=(0,d.Av)(),i=(0,m.pK)(),l=s.useState(!1),v=a()(l,2),h=v[0],x=v[1],y=(0,c.I0)();s.useEffect((function(){if(!h&&n){var a=function(){if(t.current&&!h){var a=(0,f.L6)(t.current),l=(0,f.tM)(a),s=l.top+l.height,c=(0,f.tM)((0,f.t_)()),d=c.top+c.height,m=n.content.isLockedPreviewOnly,p=r||i.includes("post_page");!m&&d>=s-100&&p&&(x(!0),y((0,g.C2)(!0)),o.event("post.clientRead",{source:r?"post_page":i,postId:n.id,collectionSlug:n.collection?n.collection.slug:"",sequenceId:n.sequence?n.sequence.sequenceId:""}),e||(0,u.T8)(n.id))}};return p.V6.on("scroll_end",a),function(){p.V6.off("scroll_end",a)}}}),[h,n,r]),s.useEffect((function(){return function(){y((0,g.C2)(!1))}}),[])}var x=(0,l.Ps)(v())},2874:(e,t,n)=>{"use strict";n.d(t,{k1:()=>C,EA:()=>M,d0:()=>L,_k:()=>U});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(60046),s=n(62872),c=n(43689),u=n(51562),d=n(47578),m=n(71542),p=n(76532),g=n(62181),f=n(11852),v=n(30027),h=n(42933),x=n(55099),y=n(82318),E=n(98024),b=n(17614),w=n(95760),S=n(51512),P=n(18839),I=n(67297),O=n(6522),_=n(90038),A=n(96879),k=n(27952);function R(){var e=o()(["\n  fragment EntityDrivenSubscriptionLandingPageScreen_writer on User {\n    name\n    imageId\n    id\n    username\n    ...userUrl_user\n  }\n  ","\n"]);return R=function(){return e},e}var C="f73713ca13c3",M="a2ace5bcce17",T="entity-driven-sub-landing-page",B=function(){return a.createElement(s.l,{borderColor:"rgb(230 230 230)",height:c.Je,heightSm:c.R2},a.createElement(v.P,null,a.createElement(h.x,{display:"flex",alignItems:"center",height:"".concat(c.Je,"px"),sm:{height:"".concat(c.R2,"px")},flexDirection:"row"},a.createElement(h.x,{justifySelf:"flex-start",flexGrow:"1"},a.createElement(l.Rv,{size:"S"})),a.createElement(D,null))))},D=function(){return(0,p.H)().value?null:a.createElement(h.x,{justifySelf:"flex-end"},a.createElement(E.F,{scale:"L"},a.createElement(h.x,{display:"flex",flexDirection:"row",sm:{flexDirection:"column"}},a.createElement(h.x,{paddingRight:"4px"},"Already a member?"),a.createElement(g.R9,{operation:"login",linkStyle:"OBVIOUS",susiEntry:"entity_driven_subscription_lp"},"Sign in"))))},L=function(e){var t,n,r,o=e.user,i=e.redirectExperiment,l=e.postId,s=(0,I.v9)((function(e){return e.config.authDomain})),c=(0,I.v9)((function(e){return e.config.productName})),g=(0,p.H)().value,R=(0,w.Av)(),C=a.useCallback((function(){R.event("entityDrivenSubCallToAction.clicked",{userId:null==g?void 0:g.id,entityId:null==o?void 0:o.id})}),[o,null==g?void 0:g.id,s]);if(!o)return null;var M=null!==(t=o.name)&&void 0!==t?t:"",D=null!==(n=o.username)&&void 0!==n?n:"",L=null!==(r=o.imageId)&&void 0!==r?r:O.gG,U=o.id,j=(0,k.AWr)(o,s),N=(0,A.Rk)((0,k.c5p)(s),{subscribeToUserId:U}),W=l?(0,k.o2w)(s,l):j,F=null!=g&&g.mediumMemberAt?j:N;return(0,d.KQ)({},M),a.createElement(a.Fragment,null,a.createElement(P._,{card:"summary_large_image",title:"Read every story from ".concat(M," (and thousands of other writers on ").concat(c,")"),description:"As a ".concat(c," member, a portion of your membership fee goes to writers you read, and you get full access to every story on ").concat(c,"."),imageUrl:(0,_.W6)({miroId:L,width:1200,strategy:_._S.Resample,ignorePixelRatio:!0}),pageType:"website",pageUrl:(0,k.h3G)(s,D),publicationName:c,publicationTwitterHandle:"@Medium"}),a.createElement(S.cW,{source:{name:"entity_driven_subscription",userId:U}},a.createElement(h.x,{display:"flex",height:"100vh",flexDirection:"column"},a.createElement(B,null),a.createElement(h.x,{display:"flex",height:"0",flexGrow:"1",textAlign:"center",justifyContent:"center",alignItems:"center",flexDirection:"column"},a.createElement(v.P,{size:"inset"},a.createElement(h.x,{display:"flex",paddingBottom:"32px",justifyContent:"center"},a.createElement(m.s,null,a.createElement(f.z,{miroId:L,alt:M||"",diameter:128,freezeGifs:!1})),a.createElement(m.e,null,a.createElement(f.z,{miroId:L,alt:M||"",diameter:80,freezeGifs:!1}))),a.createElement(h.x,{paddingBottom:"20px"},a.createElement(b.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},a.createElement(u.W,{featureString:T,target:"title-copy"},"Read every story from ",M," (and thousands of other writers on Medium)."))),a.createElement(h.x,{paddingBottom:"20px"},a.createElement(E.F,{scale:"L",color:"DARKER"},a.createElement(u.W,{featureString:T,target:"description-copy"},"As a Medium member, a portion of your membership fee goes to the writers you read, and you get full access to every story on Medium."))),a.createElement(h.x,{display:"flex",paddingBottom:"20px",flexDirection:{xs:i?"column-reverse":void 0,sm:i?"column-reverse":void 0,md:void 0,lg:void 0,xl:void 0},justifyContent:"center"},i&&a.createElement(h.x,{paddingRight:{xs:void 0,sm:void 0,md:"12px",lg:"12px",xl:"12px"},paddingTop:{xs:"12px",sm:"12px",md:void 0,lg:void 0,xl:void 0}},a.createElement(x.z,{href:W,buttonStyle:"OBVIOUS",size:"LARGE"},"Not now")),a.createElement(h.x,null,a.createElement(x.z,{onClick:C,href:F,buttonStyle:"STRONG",size:"LARGE"},a.createElement(u.W,{featureString:T,target:"logged-in-button-copy"},"Become a member")))),!i&&a.createElement(E.F,{scale:"L",color:"DARKER",tag:"span"},a.createElement(y.r,{linkStyle:"SUBTLE",href:j},a.createElement(u.W,{featureString:T,target:"link-copy"},"Visit ",M,"'s profile"))))))))},U=(0,i.Ps)(R(),k.$mN)},33572:(e,t,n)=>{"use strict";function r(e){if((e.match(/ /g)||[]).length>1)return"";var t=e.indexOf(" ");return e.substring(0,t)}function o(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}n.d(t,{J:()=>r,S:()=>o})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1264.22a3fc5c.chunk.js.map